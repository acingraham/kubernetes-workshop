<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Kubernetes Intro Workshop</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h3>Intro to Kubernetes Workshop</h3>
					<hr />
					<ul>
						<li>Go to <a href="https://bit.ly/mongo-kubernetes" target="_blank">bit.ly/mongo-kubernetes</a> to open these slides</li>
						<li>Once open, press &rarr; to go to the next slide and confirm you have all the dependencies installed for this workshop</li>
					</ul>
				</section>

				<section>
					<section>
						<h3>[1 of 4] Confirm Docker Desktop is installed</h3>
						<hr />
						<ul>
							<li>
								<p>Run the following command in your terminal:</p>
								<pre><code data-trim data-noescape>
									docker ps
								</code></pre>
							</li>
							<li>
								<p>You should see something like the following:</p>
								<img src="./assets/dockerps-success.png" alt="docker ps success"/>
							</li>
							<li>If so, click &rarr;. If not, click &darr; to troubleshoot.</li>
						</ul>
					</section>
					<section>
						<h3>Install Docker Desktop</h3>
						<hr />
						<ul>
							<li>Go to <a href="https://docs.docker.com/get-docker/" target="_blank">docs.docker.com/get-docker/</a> and follow the instructions to install Docker Desktop</li>
							<li>Once done, click &rarr;</li>
						</ul>
					</section>
				</section>

				<section>
					<section>
						<h3>[2 of 4] Enable Kubernetes on Docker Desktop</h3>
						<hr />
						<ul>
							<li>
								<p>Open the Docker Desktop Dashboard, go to Settings, and enable Kubernetes if it isn't already. Click <strong>Apply & restart</strong> after enabling. Press &darr; for more detailed instructions</p>
								<img src="./assets/DockerDesktopKubernetes.png" alt="Docker Desktop Enable Kubernetes" class="image-sm">
							</li>
						</ul>
					</section>
					<section>
						<h3>Enable Kubernetes on Docker Desktop</h3>
						<hr />
						<ul>
							<li>Go to <a href="https://docs.docker.com/desktop/kubernetes/" target="_blank">docs.docker.com/desktop/kubernetes/</a> and follow the instructions to enable Kubernetes on Docker Desktop</li>
							<li>Once done, click &rarr;</li>
						</ul>
					</section>
				</section>

				<section>
					<section>
						<h3>[3 of 4] Confirm kubectl is installed</h3>
						<hr />
						<ul>
							<li>
								<p>Run the following command in your terminal:</p>
								<pre><code data-trim data-noescape>
									kubectl get nodes
								</code></pre>
							</li>
							<li>
								<p>You should see something like the following:</p>
								<img src="./assets/KubectlGetNodesSuccess.png" alt="kubectl get nodes success"/>
							</li>
							<li>If so, click &rarr;. If not, click &darr; to troubleshoot.</li>
						</ul>
					</section>
					<section>
						<h3>Install kubectl</h3>
						<hr />
						<ul>
							<li>Go to <a href="https://kubernetes.io/docs/tasks/tools/#kubectl" target="_blank">kubernetes.io/docs/tasks/tools/#kubectl</a> and follow the instructions to install kubectl</li>
							<li>Once done, click &rarr;</li>
						</ul>
					</section>
				</section>

				<section>
					<h3>[4 of 4] Install the Coopernetes container we'll be using for examples</h3>
					<hr />
					<ul>
						<li>
							<p>Run the following command in your terminal:</p>
							<pre><code data-trim data-noescape>
								docker pull andrewingraham509/coopernetes:latest
							</code></pre>
						</li>
						<li>
							<p>You should see something like the following:</p>
							<img src="./assets/DockerPullSuccess.png" alt="docker pull success"/>
						</li>
						<li>If you run into an error, let me know! Otherwise, click &rarr;</li>
					</ul>
				</section>
	
				<section>
					<section>
						<h3>You're ready for the workshop!</h3>
						<hr />
						<p>We'll start shortly. While you wait, feel free to press &darr; repeatedly to learn some Kubernetes trivia.</p>
					</section>
					<section>
						<p><strong>Kubernetes</strong> is a Greek word meaning <strong>helmsman</strong> which is the person who steers a ship, the same way Kubernetes steers the containers it controls. Kubernetes was also chosen because it was a rarely Googled term.</p>
					</section>
					<section>
						<p>Kubernetes is based on Google's internal container orchestration project called <strong>Borg</strong></p>
					</section>
					<section>
						<p>The team originally wanted to call it <a href="https://en.wikipedia.org/wiki/Seven_of_Nine" target="_blank">Seven of Nine</a> as a reference to the Star Trek Borg drone, but trademarking wouldn't allow it</p>
						<img src="./assets/SevenOfNine.jpeg" alt="Seven of Nine Drone" class="image-sm" />
					</section>
					<section>
						<p>The wheel of a ship is called a <strong>helm</strong> and is where the Kubernetes logo comes from. Despite helms typically having 6 or 8 spokes, you'll notice the Kubernetes logo has 7. This is a reference to the "Seven of Nine" drone.</p>
						<img src="./assets/KubernetesLogo.png" alt="Kubernetes Logo" class="image-sm"/>
					</section>
					<section>
						Kubernetes is often shortened to k8s (pronounced "kates")
					</section>
					<section>
						<p>Want more Kubernetes lore? Here's a documentary on Kubernetes:</p>
						<p><iframe width="560" height="315" src="https://www.youtube.com/embed/BE77h7dmoQU?si=kegavaoulcPeGs5v" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></p>
					</section>
				</section>

				<section>
					<h3>Overview</h3>
					<hr />
					<ol>
						<li>Intro to Kubernetes</li>
						<li>Kubernetes Architecture</li>
						<li>Demo Project and Kubernetes Fundamentals</li>
						<li>Kubernetes at Mongo</li>
					</ol>
				</section>

				<section>
					<h3>1. Intro to Kubernetes</h3>
				</section>

				<section>
					<p>But before we get started with Kubernetes, let's cover some quick background information...</p>
				</section>

				<section>
					<section>
						<h3>Containers</h3>
						<hr />
						<ul>
							<li class="fragment">A way to package code and all its dependencies so an application runs reliably from one environment to another</li>
							<li class="fragment">Similar to Virtual Machines (VMs), containers provide benefits like resource isolation and allocation</li>
							<li class="fragment">Unlike VMs, containers virtualize the operating system instead of the hardware</li>
							<li class="fragment">This allows containers to be more portable and efficient</li>
							<li class="fragment">Press &darr; for additional resources on Containers</li>
						</ul>
					</section>
					<section>
						<h3>Additional resources</h3>
						<hr />
						<ul>
							<li><a href="https://www.youtube.com/watch?v=0qotVMX-J5s" target="_blank">Containerization Explained</a></li>
							<li><a href="https://www.youtube.com/watch?v=cjXI-yxqGTI" target="_blank">Containers vs VMs: What's the difference?</a></li>
						</ul>
					</section>
				</section>

				<section>
					<section>
						<h3>Docker</h3>
						<hr />
						<ul>
							<li class="fragment">Docker is a software platform that allows you to build, test, and deploy applications quickly</li>
							<li class="fragment">Docker packages software into containers</li>
							<li class="fragment"><a href="https://hub.docker.com/" target="_blank">Docker Hub</a> is the world's largest library and community for container images</li>
							<li class="fragment">Press &darr; for additional resources on Docker</li>
						</ul>
					</section>
					<section>
						<h3>Additional resources</h3>
						<hr />
						<ul>
							<li><a href="https://www.youtube.com/watch?v=Gjnup-PuquQ" target="_blank">Docker in 100 Seconds</a></li>
							<li><a href="https://docs.docker.com/get-started/02_our_app/" target="_blank">Containerize an Application</a></li>
							<li><a href="https://learn.cantrill.io/p/docker-fundamentals" target="_blank">Docker Fundamentals Course</a></li>
						</ul>
					</section>
				</section>

				<section>
					<section>
						<h3>Microservices</h3>
						<hr />
						<ul>
							<li class="fragment">Microservices are an architectural and organizational approach to software development where software is composed of small, independent services</li>
							<li class="fragment">The trend from monolithic architectures towards microservices caused an increased use of container technologies</li>
							<li class="fragment">This resulted in applications that could be made up of lots and lots of containers</li>
							<li class="fragment">Press &darr; for additional resources on microservices</li>
						</ul>
					</section>
					<section>
						<h3>Additional resources</h3>
						<hr />
						<ul>
							<li><a href="https://www.youtube.com/watch?v=CdBtNQZH8a4" target="_blank">What are Microservices?</a></li>
							<li><a href="https://www.youtube.com/watch?v=lTAcCNbJ7KE" target="_blank">What Are Microservices Really All About? (And When Not To Use It)</a></li>
						</ul>
					</section>
				</section>

				<section>
					<h3>1. Intro to Kubernetes</h3>
					<hr />
					<ul>
						<li class="fragment">Open source container orchestration tool</li>
						<li class="fragment">Developed by Google</li>
						<li class="fragment">Helps manage containerized applications in different deployment environments</li>
					</ul>
				</section>

				<section>
					<h3>Why would we need a container orchestration tool?</h3>
					<hr />
					<ul>
						<li class="fragment">More microservices mean more containers to deploy and manage</li>
						<li class="fragment"><img src="./assets/ComplexArchitecture.jpeg" /></li>
						<li class="fragment">Orchestration tools handle this complexity for us</li>
						<li class="fragment">Also allows us to more easily and accurately replicate our application across environments</li>
					</ul>
				</section>

				<section>
					<h3>Kubernetes Benefits</h3>
					<hr />
					<ul>
						<li class="fragment">Service discovery and load balancing</li>
						<li class="fragment">Automated rollouts and rollbacks</li>
						<li class="fragment">Automatic bin packing</li>
						<li class="fragment">Autoscaling</li>
						<li class="fragment">Secret and configuration management</li>
						<li class="fragment">Self-healing</li>
						<li class="fragment">Declarative syntax</li>
						<li class="fragment">Replicating architecture across environments (dev, prod, AWS, Azure)</li>
						<li class="fragment">Increased portability</li>
						<li class="fragment">Large community</li>
					</ul>
				</section>

				<section>
					<section>
						<h3>Kubernetes Costs</h3>
						<hr />
						<ul>
							<li class="fragment">Increased complexity</li>
							<li class="fragment">YAGNI</li>
							<li class="fragment">Press &darr; for additional resources</li>
						</ul>
					</section>
					<section>
						<h3>Additional resources</h3>
						<hr />
						<ul>
							<li><a href="https://www.youtube.com/watch?v=H5sPGruv2yc" target="_blank">You Don’t Need Kubernetes</a></li>
							<li><a href="https://www.youtube.com/watch?v=y8OnoxKotPQ" target="_blank">Microservices Parody</a></li>
						</ul>
					</section>
				</section>

				<section>
					<section>
						<h3>2. Kubernetes Architecture</h3>
						<hr />
						<ul>
							<li>Press &darr; for additional resources</li>
						</ul>
					</section>
					<section>
						<h3>Additional resources</h3>
						<hr />
						<ul>
							<li><a href="https://www.youtube.com/watch?v=TlHvYWVUZyc" target="_blank">Kubernetes Explained in 6 Minutes | k8s Architecture</a></li>
						</ul>
					</section>
				</section>


				<section data-transition="slide-in fade-out">
					<img src="./assets/Arch1.png" class="image-md"/>
					<ul>
						<li class="fragment">A system deployed on Kubernetes is called a <strong>cluster</strong></li>
						<li class="fragment">A cluster is made up of a <strong>control plane</strong> and <strong>worker nodes</strong></li>
					</ul>
				</section>

				<section data-transition="fade-in fade-out">
					<img src="./assets/Arch2.png" class="image-md"/>
					<ul>
						<li class="fragment"><strong>Worker nodes</strong> are where our application code runs</li>
						<li class="fragment"><strong>Nodes</strong> are physical or virtual machines, configured to run Kubernetes Pods</li>
					</ul>
				</section>

				<section data-transition="fade-in fade-out">
					<img src="./assets/Arch4.png" class="image-md"/>
					<ul>
						<li class="fragment"><strong>Pods</strong> are the smallest deployable units of computing that you can create and manage in Kubernetes</li>
						<li class="fragment">They are a lightweight abstraction over containers</li>
						<li class="fragment">Typically 1-to-1 with a container. Meaning we'll usually only run 1 container within a Pod. We might include some sidecar containers in the same Pod.</li>
						<li class="fragment">Ephemeral. Can die very easily.</li>
					</ul>
				</section>

				<section data-transition="fade-in fade-out">
					<img src="./assets/Arch4.png" class="image-md"/>
					<ul>
						<li class="fragment">The <strong>control plane</strong> is the brains of a cluster</li>
						<li class="fragment">Can be composed of multiple nodes</li>
						<li class="fragment">Made up of 5 Kubernetes components</li>
					</ul>
				</section>

				<section data-transition="fade-in fade-out">
					<img src="./assets/Arch5.png" class="image-md"/>
					<ul>
						<li class="fragment">The <strong>API Server</strong> exposes the Kubernetes API and acts as the frontend for the control plane</li>
					</ul>
				</section>

				<section data-transition="fade-in fade-out">
					<img src="./assets/Arch6.png" class="image-md"/>
					<ul>
						<li class="fragment">The <strong>Controller Manager</strong> has a variety of responsibilities. Some include:</li>
						<li class="fragment">Responsible for noticing and responding when nodes go down</li>
						<li class="fragment">Watches for Job objects that represent one-off tasks, then creates Pods to run those tasks to completion</li>
					</ul>
				</section>

				<section data-transition="fade-in fade-out">
					<img src="./assets/Arch7.png" class="image-md"/>
					<ul>
						<li class="fragment">The <strong>Scheduler</strong> watches for newly created Pods without an assigned Node and selects a Node for them to run on</li>
						<li class="fragment">Intelligently assign new pods to most appropriate Node</li>
						<li class="fragment">Factors taken into account for scheduling decisions include: individual and collective resource requirements, hardware/software/policy constraints, affinity and anti-affinity specifications, data locality, inter-workload interference, and deadlines.</li>
					</ul>
				</section>

				<section data-transition="fade-in fade-out">
					<img src="./assets/Arch8.png" class="image-md"/>
					<ul>
						<li class="fragment"><strong>etcd</strong> is a strongly consistent, distributed key-value store. It pre-dates Kubernetes and is used outside of Kubernetes.</li>
						<li class="fragment">An etcd backup is enough to restore a Kubernetes cluster's state completely.</li>
						<li class="fragment">Within Kubernetes, it is used for the following:</li>
						<li class="fragment">Configuration data</li>
						<li class="fragment">Status information</li>
						<li class="fragment">Info about Nodes and containers</li>
					</ul>
				</section>

				<section data-transition="fade-in fade-out">
					<img src="./assets/Arch9.png" class="image-md"/>
					<ul>
						<li class="fragment">The <strong>Cloud Controller Manager</strong> lets you link your cluster into your cloud provider's API</li>
						<li class="fragment">This is an optional component</li>
					</ul>
				</section>

				<!--
				<section>
					Cluster
					Cluster is made up of Nodes. A Node is just a physical or virtual machine that is set up to run Pods.
					Pods
						Pods are the smallest deployable units of computing that you can create and manage in Kubernetes.
						Lightweight abstraction over container
						Makes Kubernetes container runtime agnostic (maybe?)
						Typically 1-to-1 with container. Meaning we'll usually only run 1 container within a Pod. We might include some sidecar containers in the same Pod.
							- Any ideas why this is the standard?
						Ephemeral. Can die very easily.
	
					Typically 2 Types of Nodes. Control plane nodes and worker nodes. TODO - Is the control plane actually running on Nodes? I think this is false.
					Control Plane
						Control plane is the brains of Kubernetes
						Can be multiple nodes. Think of production. Usually going to be separated regionally.
						Components
							- API Server - Exposes the Kubernetes API and acts as the frontend for the control plane.
							- Controller Manager - has a variety of responsibilities. Some include:
								- Responsible for noticing and responding when nodes go down
								- Watches for Job objects that represent one-off tasks, then creates Pods to run those tasks to completion.
							- Scheduler
								- Watches for newly created Pods without an assigned Node and selects a Node for them to run on
								- Factors taken into account for scheduling decisions include: individual and collective resource requirements, hardware/software/policy constraints, affinity and anti-affinity specifications, data locality, inter-workload interference, and deadlines.
								- Intelligently assign new pods to most appropriate Node
							- etcd
								- etcd is a strongly consistent, distributed key-value store. Pre-dates Kubernetes and is used outside of Kubernetes.
								- Within Kubernetes, it'd used for
									- Configuration data
									- Status information
									- Info about Nodes and containers
									- With a backup of etcd... TODO - I think you can restore a cluster completely using an etcd backup

					Worker Nodes
						Where our application code runs
						What is running on worker node
							- kubelet
							- kubeproxy
					Virtual Network
						Basically turns the cluster into one giant machines
						Workers are usually

				</section>
				-->


				<section>
					<h3>3. Demo Project and Kubernetes Fundamentals</h3>
					<hr />
					<ul>
						<li class="fragment">Let's start by running the project without Kubernetes</li>
						<li class="fragment">I have the <a href="https://github.com/acingraham/coopernetes" target="_blank">GitHub repo</a> downloaded locally for this</li>
					</ul>
				</section>

				<section>
					<h3>Docker Desktop</h3>
					<hr />
					<ul>
						<li class="fragment">We're going to be running Kubernetes on Docker Desktop</li>
						<li class="fragment">At the beginning of this workshop you downloaded a Docker image of the Coopernetes project</li>
						<li class="fragment">Images are read-only, immutable templates that define how a container will be created. Containers are the runtime instance of an image.</li>
						<li class="fragment">Note that Docker Desktop will only using 1 node for our entire Kubernetes cluster. Fine for our purposes, but obviously not what we'd do in production.</li>
					</ul>
				</section>

				<!--
				<section>
					We're using Docker Desktop to run Kubernetes
					- Open Docker Desktop and show some basics (Containers and Images tabs)
					- Images are read-only, immutable templates that define how a container will be created. Containers are the runtime instance of an image.
					- What does it mean for Kubernetes to be running on Docker Desktop? TODO - Answer This
					- Note that Docker Desktop is only using 1 node for our entire Kubernetes cluster. Fine for our purposes, but obviously not what we'd do in production. A reminder that 
				</section>
				-->

				<section>
					<h3>kubectl</h3>
					<hr />
					<ul>
						<li class="fragment">A Kubernetes command-line tool that allows you to interact with your Kubernetes cluster</li>
						<li class="fragment">What control plane component do you think it communicates with?</li>
					</ul>
				</section>

				<section>
					<img src="./assets/kubectl-pronunciation.jpeg" alt="Kubectl Pronunciation Meme"  class="image-md"/>
				</section>
				<section>
					<pre><code data-trim data-noescape>
						kubectl cluster-info
					</code></pre>
					<ul>
						<li class="fragment">Displays cluster info</li>
						<li class="fragment">Shows Kubernetes control plane and CoreDNS are running. CoreDNS is a DNS server that serves as the Kubernetes cluster DNS.</li>
					</ul>
				</section>

				<section>
					<pre><code data-trim data-noescape>
						kubectl get nodes
					</code></pre>
					<ul>
						<li class="fragment">Gets information about the Nodes in our cluster</li>
						<li class="fragment">You should see (at least) one row with NAME of “docker-desktop”</li>
						<li class="fragment">Notice we only have the control plane node</li>
						<li class="fragment">If you don't see the docker-desktop node, make sure you enabled kubernetes in docker desktop and it completed restarting.</li>
					</ul>
				</section>

				<section>
					<pre><code data-trim data-noescape>
						kubectl config get-contexts
					</code></pre>
					<ul>
						<li class="fragment">A Kubernetes context is a group of access parameters that define which cluster you're interacting with, which user you're using, and which namespace you're working in</li>
						<li class="fragment">We want to make sure we're interacting with the Docker Desktop Kubernetes cluster</li>
						<li class="fragment">One row should have "*" in the CURRENT column</li>
						<li class="fragment">If it isn't "docker-desktop", run <pre><code data-trim data-noescape>kubectl config use-context docker-desktop</code></pre></li>
					</ul>
				</section>


				<!--
				<section>
					kubectl cluster-info
						- Displays cluster info
						- Shows Kubernetes control plane and CoreDNS are running. CoreDNS is a DNS server that serves as the Kubernetes cluster DNS. Used for service discovery?
					kubectl get nodes
						- Gets information about the Nodes in our cluster
						- You should see (at least) one row with NAME of “docker-desktop”
						- Notice we only have the control plane node
						- If you don't see the docker-desktop node, make sure you enabled kubernetes in docker desktop and it completed restarting.
					kubectl config get-contexts
						- A Kubernetes context is a group of access parameters that define which cluster you're interacting with, which user you're using, and which namespace you're working in.
						- We want to make sure we're interacting with the Docker Desktop Kubernetes cluster
						- One row should have "*" in the CURRENT column.
						- If it isn't "docker-desktop", run `kubectl config use-context docker-desktop`
				</section>
				-->
				<section>
					<h3>Creating our first Pod!</h3>
					<hr />
					<ul>
						<li class="fragment">Reminder: Pods are the smallest deployable units of computing that you can create and manage in Kubernetes. They're a thin abstraction over the container.</li>
					</ul>
				</section>

				<section>
					<pre><code data-trim data-noescape>
						kubectl run myfirstpod --image=andrewingraham509/coopernetes:latest
					</code></pre>
					<ul>
						<li class="fragment">Run the above in the terminal and then use one of our previous kubectl commands to see if it's running</li>
					</ul>

					<!-- https://kubebyexample.com/learning-paths/application-development-kubernetes/lesson-1-running-containerized-applications-4 -->
				</section>

				<section>
					<pre><code data-trim data-noescape>
						kubectl describe pod myfirstpod
					</code></pre>
					<ul>
						<li class="fragment">This returns more details about the Pod</li>
					</ul>
				</section>

				<section>
					<pre><code data-trim data-noescape>
						kubectl exec myfirstpod -- /bin/ls
					</code></pre>
					<ul>
						<li class="fragment">We can execute commands within an existing Pod</li>
					</ul>
					<!-- https://kubebyexample.com/learning-paths/application-development-kubernetes/lesson-1-running-containerized-applications-4 -->
				</section>

				<section>
					<pre><code data-trim data-noescape>
						kubectl exec --stdin --tty myfirstpod -- /bin/sh
					</code></pre>
					<ul>
						<li class="fragment">And also connect a shell to an existing Pod</li>
					</ul>
					<!-- https://kubebyexample.com/learning-paths/application-development-kubernetes/lesson-1-running-containerized-applications-4 -->
				</section>

				<section>
					<h3>Creating Pods through the commandline</h3>
					<hr />
					<ul>
						<li class="fragment">Fine for quick experimentation, but not how we'll normally create Pods</li>
						<li class="fragment"></li>
					</ul>
				</section>

				<section>
					<pre><code data-trim data-noescape>
						kubectl delete pod myfirstpod
					</code></pre>
					<ul>
						<li class="fragment">Let's delete our previous Pod</li>
						<li class="fragment">And create a new one using...</li>
					</ul>
				</section>

				<section>
					<section>
						<h3>Manifest Files!</h3>
						<hr />
						<ul>
							<li class="fragment">Describe <a href="https://www.airplane.dev/blog/kubernetes-objects" target="_blank">Kubernetes objects</a></li>
							<li class="fragment">Declarative. We describe the desired state and Kubernetes makes changes to reach that state.</li>
							<li class="fragment">Can be written in YAML or JSON</li>
							<li class="fragment">Can easily be stored in version control software</li>
							<li class="fragment">Press &darr; for additional resources on Manifest Files</li>
						</ul>
					</section>
					<section>
						<h3>Additional Resources</h3>
						<hr />
						<ul>
							<li><a href="https://kubernetes.io/docs/concepts/configuration/overview/" target="_blank">Configuration Best Practices</a></li>
						</ul>
					</section>
				</section>

				<section>
					<h3>4 Required Fields</h3>
					<hr />
					<ul>
						<li class="fragment"><strong>apiVersion</strong> - Which version of the Kubernetes API you're using to create this object</li>
						<li class="fragment"><strong>kind</strong> - What kind of object you want to create</li>
						<li class="fragment"><strong>metadata</strong> - Data that helps uniquely identify the object, including a name string, UID, and optional namespace</li>
						<li class="fragment"><strong>spec</strong> - What state you desire for the object</li>
					</ul>
					<!-- https://kubernetes.io/docs/concepts/overview/working-with-objects/ -->
				</section>

				<section>
					<h3>pod.yml</h3>
					<hr />
					<pre><code data-line-numbers="1|2|3-6|7-12" data-trim data-noescape>
						apiVersion: v1
						kind: Pod
						metadata:
						  name: first-pod
						  labels:
						    project: coopernetes
						spec:
						  containers:
						    - name: web
						      image: andrewingraham509/coopernetes:latest
						      ports:
						        - containerPort: 3000
					</code></pre>
				</section>

				<section>
					<section>
						<pre><code data-trim data-noescape>
							kubectl apply -f pod.yml
						</code></pre>
						<ul>
							<li class="fragment">Save the code on the previous slide to a file named <strong>pod.yml</strong></li>
							<li class="fragment">Alternatively, you can download the file in the <a href="https://github.com/acingraham/kubernetes-workshop/blob/main/yaml/solutions/pod.yml" target="_blank">GitHub repo</a></li>
							<li class="fragment">Run the above command to create your Pod</li>
							<li class="fragment">Afterwards, try some of the kubectl commands we learned to check if it's running</li>
							<li class="fragment">Press &darr; for some VS Code Extensions to help with writing Manifest Files</li>
						</ul>
					</section>
					<section>
						<h3>VS Code Extensions</h3>
						<hr />
						<ul>
							<li><a href="https://marketplace.visualstudio.com/items?itemName=lunuan.kubernetes-templates" target="_blank">Kubernetes Templates</a></li>
							<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-kubernetes-tools.vscode-kubernetes-tools" target="_blank">Kubernetes Tools</a></li>
						</ul>
					</section>
				</section>


				<section>
					<h3>kubectl apply</h3>
					<hr />
					<ul>
						<li class="fragment"><strong>kubectl apply -f</strong> lets you send a file to the Kubernetes API Server</li>
						<li class="fragment">Kubernetes will read the file and store the configuration in the cluster store</li>
						<li class="fragment">The <strong>scheduler</strong> will then find a worker node to run the Pod</li>
					</ul>
				</section>


				<!--
				<section>
					To create a Pod, we need to create a Manifest / Configuration file (TODO - figure out name)
					- Go over writing YAML and the VS extension for this if you don't do it earlier
					- Configuration files can be written in JSON or YAML
					- 3 Parts to a configuration file. The first 2 parts are the metadata and specification (which differs based on the metadata). I said there were 3 parts. Where's the 3rd? That's the status of the configuration file. It's automatically generated and edited by Kubernetes.
					- TODO - Configuration file may be called a Manifest. Basing that off of https://kubebyexample.com/learning-paths/application-development-kubernetes/lesson-1-running-containerized-applications
					- Where does Kubernetes get this status information? etcd stores this information. What puts it in etcd? TODO - Answer this question.
					- YAML is super strict with indentation
				</section>
				-->

				<section>
					<h3>Try going to localhost:3000</h3>
					<hr />
					<ul>
						<li class="fragment">Are you able to access the site?</li>
						<li class="fragment">Probably not. This is because Kubernetes doesn't expose Pods automatically.</li>
						<li class="fragment">To solve this, we'll need another Kubernetes component...</li>
					</ul>
				</section>

				<section>
					<section>
					<h3>Services</h3>
					<hr />
					<ul>
						<li class="fragment">Used for creating static IP addresses</li>
						<li class="fragment">Lifecycles of Pod and Service are not connected</li>
						<li class="fragment">Recall that Pods are ephemeral</li>
						<li class="fragment">Services can be internal or external to the cluster</li>
						<li class="fragment">Press &darr; for additional resources on Services</li>
					</ul>
					</section>
					<section>
						<h3>Additional Resources</h3>
						<hr />
						<ul>
							<li><a href="https://kubernetes.io/docs/concepts/services-networking/service/">Kubernetes Service</a></li>
						</ul>
					</section>
				</section>

				<section>
					<pre><code data-trim data-noescape>
						kubectl get svc
					</code></pre>
					<ul>
						<li>Try running the above to see what Services are running</li>
						<li>Then we'll try creating a new Service with another Manifest file</li>
					</ul>
				</section>

				<section>
					<h3>svc.yml</h3>
					<hr />
					<pre><code data-line-numbers="1|2|3-4|5-13" data-trim data-noescape>
						apiVersion: v1
						kind: Service
						metadata:
						  name: first-svc
						spec:
						  type: NodePort
						  ports:
						  - port: 3000
						    protocol: TCP
						    targetPort: 3000
						    nodePort: 31111
						  selector:
						    project: coopernetes
					</code></pre>
				</section>

				<section>
					<pre><code data-trim data-noescape>
						kubectl apply -f svc.yml
					</code></pre>
					<ul>
						<li class="fragment">Save the code on the previous slide to a file named <strong>svc.yml</strong></li>
						<li class="fragment">Alternatively, you can download the file in the <a href="https://github.com/acingraham/kubernetes-workshop/blob/main/yaml/solutions/svc.yml" target="_blank">GitHub repo</a></li>
						<li class="fragment">Run the above command to create your Service</li>
						<li class="fragment">Afterwards, try some of the kubectl commands we learned to check if it's running</li>
					</ul>
				</section>

				<section>
					<pre><code data-trim data-noescape>
						kubectl describe svc first-svc
					</code></pre>
					<ul>
						<li>Try running the above to see more info about your Service</li>
					</ul>
				</section>

				<section>
					<h3>Go to localhost:31111 and confirm it works</h3>
				</section>

				<section>
					<h3>Deleting the Pod and Service</h3>
					<pre><code data-trim data-noescape>
						kubectl delete svc first-svc
					</code></pre>
					<pre><code data-trim data-noescape>
						kubectl delete pod first-pod
					</code></pre>
				</section>

		
				<section>
					<h3>Deployments</h3>
					<hr />
					<ul>
						<li>Blueprints / Templates</li>
						<li>This is how you'll pretty much always be defining pods in practice</li>
						<li>Try converting the existing Pod to a Deployment by following the instructions <a href="https://medium.com/@whaleberry/convert-pod-to-deployment-in-kubernetes-b0f2fc362b21" target="_blank">here</a></li>
					</ul>
				</section>

				<section>
					<h3>Deployments</h3>
					<hr />
					<ul>
						<li>What happens if you try to delete a Pod? Does it stay deleted?</li>
						<li>What happens if you change the number of replicas in the Deployment?</li>
					</ul>
				</section>


				<!--
				<section>
					kubectl get svc
						- CLUSTER-IP value is an IP address on the internal Kubernetes Pod network and is used by other Pods and applications running on the cluster
						- Since it's a NodePort Service, it can be accessed by connecting to any cluster node o port 31111 as specified in the PORT(S) column.
						- https://www.endpointdev.com/blog/2022/01/kubernetes-101/ - This shows how we get the IP address of the service
				</section>
				-->

				<!--

				<section>Session affinity?</section>

				<section>
					Deployments
					- Blueprints / Templates
					- This is how you'll pretty much always be defining pods in practice
					- Remember how we said Kubernetes (or something TODO) is declarative? monitors the current state of the system along with the desired state and tries to keep them aligned.
				</section>

				<section>
					kubectl create deployment
					- Quickly create single-container Deployments and Services.
					- https://kubernetes.io/docs/concepts/configuration/overview/
				</section>

				<section>
					kubectl get deployments
				</section>
				<section>Ingress - better url for accessing site</section>
				<section>
					Self-healing - kill a pod and see it still works. May add the endpoint to crash the app
					- Try killing pod and show it will be brought back up
					- However, there is still downtime here. Move on to changing the number of replicas
				</section>
				<section>
					Increasing number of replicas. Redeploy.
					- Change YAML file and Redeploy
					- Note the additional pod
					- Try killing one now and confirm that the website is never down
					- Additionally, you can see the pod has been replaced.
					- This demonstrates another feature of the Service component - it acts as a load balancer, routing requests to the pods.
					- Emphasize that the way the Service knows which pods it can send requests to by the label
				</section>
				<section>
					Rolling update - dark mode version
						- Show that you may get a different pod response
				</section>
				<section>
					Session Affinity
						- What if we don't want our users to be getting responses from different Pods and switching between deployments mid-rollout?
						- 
						- https://kubernetes.io/docs/reference/networking/virtual-ips/#session-affinity
				</section>
				<section>ConfigMap - changing background color</section>
				<section>
					Secrets - TODO
					- base64 encoding
				</section>
				<section>
					Add database
					- https://www.endpointdev.com/blog/2022/01/kubernetes-101/
				</section>
				<section>Why can't we use Deployments for replicating a database?</section>
				<section>
					Stateful Sets
					- What you'd use for stateful applications (like databases) within cluster
					- Takes care of replicating pods just like Deployments, but ensures synchronization of data betweens pods
					- Recommendation seems to be to avoid putting databases in your Kubernetes cluster and instead to place them outside. I _think_ Volume Claims are used to do this. Definitely research.
				</section>
				<section>
					Volumes?
					- could be local storage to cluster
					- could be external storage which is not part of the k8s cluster. This is recommended for production.
					- Kubernetes doesn't manage any data persistence. Handling things like replication and backup is our responsibility.
				</section>
				<section>Job - send a pet to Cooper at a scheduled time</section>
				<section>CronJob - send pets regularly to Cooper with a cronjob</section>
				<section>
					- Deploying to something like linode
				</section>
				-->
				<section>
					<h3>4. Kubernetes at Mongo</h3>
					<hr />
					<ul>
						<li><a href="https://docs.google.com/document/d/1ODBtBk_0c3am_8EKXAlLZrTa9HQ4875IdXwK1h7heEo/edit" target="_blank">Kubernetes & Mongo Notes</a></li>
					</ul>
				</section>

				<section>
					<h3>Additional Resources</h3>
					<hr />
					<ul>
						<li><a href="https://roadmap.sh/kubernetes" target="_blank">Roadmap.sh - Kubernetes Roadmap</a></li>
						<li><a href="https://kubernetes.io/docs/tutorials/kubernetes-basics/" target="_blank">Kubernetes.io - Learn Kubernetes Basics</a></li>
						<li><a href="https://github.com/kelseyhightower/kubernetes-the-hard-way" target="_blank">Kubernetes the Hard Way</a></li>
					</ul>
				</section>

				<section>
					<h3>Feedback Form</h3>
					<hr />
					<p><a href="https://docs.google.com/forms/d/e/1FAIpQLSesPOg86bFGuP816w_cczDxyJ0tQuzreMiA9NWZXn7R3sslHg/viewform?usp=sf_link" target="_blank">Google Feedback Form</a></p>
				</section>

				<section>Thank you!</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
